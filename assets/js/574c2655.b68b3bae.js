"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[898],{7427:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var a=n(8102),o=(n(3696),n(9916));const r={},l="Core Concepts",i={unversionedId:"concepts",id:"concepts",title:"Core Concepts",description:"Understanding BotUI's architecture and core concepts will help you build better conversational interfaces.",source:"@site/docs/3-concepts.md",sourceDirName:".",slug:"/concepts",permalink:"/concepts",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/install"},next:{title:"`botui` Package",permalink:"/core/"}},s={},c=[{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Core Package (<code>botui</code>)",id:"core-package-botui",level:3},{value:"UI Package (<code>@botui/react</code>)",id:"ui-package-botuireact",level:3},{value:"Core vs UI Packages",id:"core-vs-ui-packages",level:2},{value:"When to use Core only",id:"when-to-use-core-only",level:3},{value:"When to use Core + React",id:"when-to-use-core--react",level:3},{value:"Blocks: The Building Blocks",id:"blocks-the-building-blocks",level:2},{value:"Message Blocks (<code>MESSAGE</code>)",id:"message-blocks-message",level:3},{value:"Action Blocks (<code>ACTION</code>)",id:"action-blocks-action",level:3},{value:"Block Structure",id:"block-structure",level:2},{value:"BlockData",id:"blockdata",level:3},{value:"BlockMeta",id:"blockmeta",level:3},{value:"Data Flow",id:"data-flow",level:2},{value:"State Resolution",id:"state-resolution",level:3},{value:"Plugin System",id:"plugin-system",level:2},{value:"Plugin Execution",id:"plugin-execution",level:3},{value:"React Integration",id:"react-integration",level:2},{value:"Hooks",id:"hooks",level:3},{value:"Custom Renderers",id:"custom-renderers",level:3},{value:"Key Principles",id:"key-principles",level:2},{value:"1. <strong>Immutable Flow</strong>",id:"1-immutable-flow",level:3},{value:"2. <strong>Single Action</strong>",id:"2-single-action",level:3},{value:"3. <strong>Plugin Transformation</strong>",id:"3-plugin-transformation",level:3},{value:"4. <strong>Extensible Rendering</strong>",id:"4-extensible-rendering",level:3},{value:"Next Steps",id:"next-steps",level:2}],u={toc:c},g="wrapper";function p({components:e,...t}){return(0,o.yg)(g,(0,a.A)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,o.yg)("h1",{id:"core-concepts"},"Core Concepts"),(0,o.yg)("p",null,"Understanding BotUI's architecture and core concepts will help you build better conversational interfaces."),(0,o.yg)("h2",{id:"architecture-overview"},"Architecture Overview"),(0,o.yg)("p",null,"BotUI follows a ",(0,o.yg)("strong",{parentName:"p"},"separation of concerns")," architecture with two main layers:"),(0,o.yg)("h3",{id:"core-package-botui"},"Core Package (",(0,o.yg)("inlineCode",{parentName:"h3"},"botui"),")"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Framework-agnostic")," JavaScript library"),(0,o.yg)("li",{parentName:"ul"},"Manages conversation state and flow"),(0,o.yg)("li",{parentName:"ul"},"Handles plugins and data transformation"),(0,o.yg)("li",{parentName:"ul"},"Provides Promise-based API for conversational flow")),(0,o.yg)("h3",{id:"ui-package-botuireact"},"UI Package (",(0,o.yg)("inlineCode",{parentName:"h3"},"@botui/react"),")"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"React-specific")," UI components"),(0,o.yg)("li",{parentName:"ul"},"Renders messages and actions"),(0,o.yg)("li",{parentName:"ul"},"Provides React hooks for state management"),(0,o.yg)("li",{parentName:"ul"},"Handles user interactions and visual presentation")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Core (botui)  \u2502\u25c4\u2500\u2500\u2500\u2502  React Package   \u2502\n\u2502                 \u2502    \u2502  (@botui/react)  \u2502\n\u2502 \u2022 State         \u2502    \u2502 \u2022 Components     \u2502\n\u2502 \u2022 Flow Control  \u2502    \u2502 \u2022 Hooks          \u2502\n\u2502 \u2022 Plugins       \u2502    \u2502 \u2022 Renderers      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,o.yg)("h2",{id:"core-vs-ui-packages"},"Core vs UI Packages"),(0,o.yg)("h3",{id:"when-to-use-core-only"},"When to use Core only"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Building for non-React frameworks (Vue, Angular, Vanilla JS)"),(0,o.yg)("li",{parentName:"ul"},"Headless/API-only conversational flows"),(0,o.yg)("li",{parentName:"ul"},"Server-side conversation logic")),(0,o.yg)("h3",{id:"when-to-use-core--react"},"When to use Core + React"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Building React applications"),(0,o.yg)("li",{parentName:"ul"},"Need pre-built UI components"),(0,o.yg)("li",{parentName:"ul"},"Want built-in styling and animations")),(0,o.yg)("h2",{id:"blocks-the-building-blocks"},"Blocks: The Building Blocks"),(0,o.yg)("p",null,"Everything in BotUI is a ",(0,o.yg)("strong",{parentName:"p"},"Block"),". There are two types:"),(0,o.yg)("h3",{id:"message-blocks-message"},"Message Blocks (",(0,o.yg)("inlineCode",{parentName:"h3"},"MESSAGE"),")"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Output")," from the bot to the user"),(0,o.yg)("li",{parentName:"ul"},"Added to the conversation history"),(0,o.yg)("li",{parentName:"ul"},"Can have different ",(0,o.yg)("inlineCode",{parentName:"li"},"messageType"),"s (text, image, embed, links, custom)")),(0,o.yg)("h3",{id:"action-blocks-action"},"Action Blocks (",(0,o.yg)("inlineCode",{parentName:"h3"},"ACTION"),")"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("strong",{parentName:"li"},"Input requests")," to the user"),(0,o.yg)("li",{parentName:"ul"},"Temporarily displayed until resolved"),(0,o.yg)("li",{parentName:"ul"},"Can have different ",(0,o.yg)("inlineCode",{parentName:"li"},"actionType"),"s (input, select, selectButtons, custom)")),(0,o.yg)("h2",{id:"block-structure"},"Block Structure"),(0,o.yg)("p",null,"Every block has this structure:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-typescript"},"interface Block {\n  key: number        // Unique identifier\n  type: string       // 'message' or 'action'\n  meta: BlockMeta    // Configuration and metadata\n  data: BlockData    // The actual content\n}\n")),(0,o.yg)("h3",{id:"blockdata"},"BlockData"),(0,o.yg)("p",null,"Contains the actual content:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-typescript"},'// For messages\n{ text: "Hello there!" }\n{ src: "image.jpg" }\n{ links: [{ text: "Link", href: "..." }] }\n\n// For actions\n{ placeholder: "Enter name" }\n{ options: [{ label: "Yes", value: "yes" }] }\n')),(0,o.yg)("h3",{id:"blockmeta"},"BlockMeta"),(0,o.yg)("p",null,"Contains configuration and metadata:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-typescript"},"// For messages\n{ messageType: 'text' | 'image' | 'embed' | 'links' | string }\n{ fromHuman: boolean }\n\n// For actions\n{ actionType: 'input' | 'select' | 'selectButtons' | string }\n{ cancelable: boolean }\n{ ephemeral: boolean } // Don't add to history\n")),(0,o.yg)("h2",{id:"data-flow"},"Data Flow"),(0,o.yg)("p",null,"BotUI follows a ",(0,o.yg)("strong",{parentName:"p"},"Promise-based conversational flow"),":"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-javascript"},'const bot = createBot()\n\nbot\n  .message.add({ text: "What\'s your name?" })      // 1. Bot asks\n  .then(() => bot.action.set(                      // 2. Bot requests input\n    { placeholder: "Your name" },\n    { actionType: \'input\' }\n  ))\n  .then((response) => {                            // 3. User responds\n    return bot.message.add({\n      text: `Hello ${response.value}!`\n    })\n  })\n  .then(() => {                                    // 4. Continue flow\n    // Next part of conversation...\n  })\n')),(0,o.yg)("h3",{id:"state-resolution"},"State Resolution"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("strong",{parentName:"li"},"Actions block")," the conversation flow"),(0,o.yg)("li",{parentName:"ol"},"User interaction calls ",(0,o.yg)("inlineCode",{parentName:"li"},"bot.next(data)")),(0,o.yg)("li",{parentName:"ol"},"This ",(0,o.yg)("strong",{parentName:"li"},"resolves")," the current action"),(0,o.yg)("li",{parentName:"ol"},"Flow continues to the next ",(0,o.yg)("inlineCode",{parentName:"li"},".then()"))),(0,o.yg)("h2",{id:"plugin-system"},"Plugin System"),(0,o.yg)("p",null,"Plugins allow you to ",(0,o.yg)("strong",{parentName:"p"},"transform blocks")," as they flow through the system:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-javascript"},"// Text transformation plugin\nbot.use((block) => {\n  if (block.type === 'message') {\n    block.data.text = block.data.text?.toUpperCase()\n  }\n  return block\n})\n")),(0,o.yg)("h3",{id:"plugin-execution"},"Plugin Execution"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Plugins run in ",(0,o.yg)("strong",{parentName:"li"},"registration order")),(0,o.yg)("li",{parentName:"ul"},"Each plugin receives output of the previous plugin"),(0,o.yg)("li",{parentName:"ul"},"Applied to ",(0,o.yg)("strong",{parentName:"li"},"both")," messages and actions")),(0,o.yg)("h2",{id:"react-integration"},"React Integration"),(0,o.yg)("h3",{id:"hooks"},"Hooks"),(0,o.yg)("p",null,"Access BotUI state in React components:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx"},"function MyComponent() {\n  const bot = useBotUI()           // Get bot instance\n  const action = useBotUIAction()  // Get current action\n  const messages = useBotUIMessage() // Get all messages\n}\n")),(0,o.yg)("h3",{id:"custom-renderers"},"Custom Renderers"),(0,o.yg)("p",null,"Extend BotUI with custom components:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-jsx"},"const customRenderers = {\n  'starRating': StarRatingAction,\n  'chart': ChartMessage\n}\n\n<BotUIAction renderer={customRenderers} />\n<BotUIMessageList renderer={customRenderers} />\n")),(0,o.yg)("h2",{id:"key-principles"},"Key Principles"),(0,o.yg)("h3",{id:"1-immutable-flow"},"1. ",(0,o.yg)("strong",{parentName:"h3"},"Immutable Flow")),(0,o.yg)("p",null,"Once a block is added, the conversation flows forward. Use ",(0,o.yg)("inlineCode",{parentName:"p"},".update()")," if you need to modify existing blocks."),(0,o.yg)("h3",{id:"2-single-action"},"2. ",(0,o.yg)("strong",{parentName:"h3"},"Single Action")),(0,o.yg)("p",null,"Only one action can be active at a time. Actions must be resolved before the next one can be set."),(0,o.yg)("h3",{id:"3-plugin-transformation"},"3. ",(0,o.yg)("strong",{parentName:"h3"},"Plugin Transformation")),(0,o.yg)("p",null,"All blocks pass through plugins, allowing global transformations and enhancements."),(0,o.yg)("h3",{id:"4-extensible-rendering"},"4. ",(0,o.yg)("strong",{parentName:"h3"},"Extensible Rendering")),(0,o.yg)("p",null,"Both messages and actions can be extended with custom components while keeping the core logic intact."),(0,o.yg)("h2",{id:"next-steps"},"Next Steps"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Read the ",(0,o.yg)("a",{parentName:"li",href:"/core/reference"},"Core API Reference")),(0,o.yg)("li",{parentName:"ul"},"Learn about ",(0,o.yg)("a",{parentName:"li",href:"/react/reference"},"React Components")),(0,o.yg)("li",{parentName:"ul"},"Build ",(0,o.yg)("a",{parentName:"li",href:"/react/custom"},"Custom Actions and Messages"))))}p.isMDXComponent=!0},9916:(e,t,n)=>{n.d(t,{xA:()=>u,yg:()=>d});var a=n(3696);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},g="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},y=a.forwardRef(function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),g=c(n),y=o,d=g["".concat(s,".").concat(y)]||g[y]||p[y]||r;return n?a.createElement(d,l(l({ref:t},u),{},{components:n})):a.createElement(d,l({ref:t},u))});function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=y;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[g]="string"==typeof e?e:o,l[1]=i;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}y.displayName="MDXCreateElement"}}]);