"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[744],{9812:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var a=t(8102),l=(t(3696),t(9916));const i={},o="Plugins",r={unversionedId:"plugins",id:"plugins",title:"Plugins",description:"Plugins are the powerful extensibility system in BotUI that allow you to transform blocks as they flow through the system. They enable powerful customization without modifying core functionality.",source:"@site/docs/plugins.md",sourceDirName:".",slug:"/plugins",permalink:"/plugins",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"React + TypeScript",permalink:"/react/typescript"},next:{title:"Core TypeScript Guide",permalink:"/typescript"}},s={},c=[{value:"Plugin Architecture",id:"plugin-architecture",level:2},{value:"Plugin Signature",id:"plugin-signature",level:3},{value:"Basic Plugin Examples",id:"basic-plugin-examples",level:2},{value:"Text Transformation Plugin",id:"text-transformation-plugin",level:3},{value:"Logging Plugin",id:"logging-plugin",level:3},{value:"Content Filtering Plugin",id:"content-filtering-plugin",level:3},{value:"Advanced Plugin Examples",id:"advanced-plugin-examples",level:2},{value:"Metadata Enhancement Plugin",id:"metadata-enhancement-plugin",level:3},{value:"Conditional Processing Plugin",id:"conditional-processing-plugin",level:3},{value:"Data Validation Plugin",id:"data-validation-plugin",level:3},{value:"Analytics Plugin",id:"analytics-plugin",level:3},{value:"Dynamic Content Plugin",id:"dynamic-content-plugin",level:3},{value:"Plugin Registration and Execution",id:"plugin-registration-and-execution",level:2},{value:"Registration",id:"registration",level:3},{value:"Execution Order",id:"execution-order",level:3},{value:"Example Flow",id:"example-flow",level:3},{value:"Plugin Best Practices",id:"plugin-best-practices",level:2},{value:"Error Handling in Plugins",id:"error-handling-in-plugins",level:2},{value:"Testing Plugins",id:"testing-plugins",level:2},{value:"TypeScript Support",id:"typescript-support",level:2}],g={toc:c},u="wrapper";function p({components:e,...n}){return(0,l.yg)(u,(0,a.A)({},g,n,{components:e,mdxType:"MDXLayout"}),(0,l.yg)("h1",{id:"plugins"},"Plugins"),(0,l.yg)("p",null,"Plugins are the powerful extensibility system in BotUI that allow you to transform blocks as they flow through the system. They enable powerful customization without modifying core functionality."),(0,l.yg)("h2",{id:"plugin-architecture"},"Plugin Architecture"),(0,l.yg)("p",null,"A plugin is a function that transforms blocks as they flow through the BotUI system. Every message and action passes through all registered plugins before being processed."),(0,l.yg)("h3",{id:"plugin-signature"},"Plugin Signature"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const plugin = (block: Block) => Block\n")),(0,l.yg)("p",null,"A plugin:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Takes a ",(0,l.yg)("inlineCode",{parentName:"li"},"Block")," as input"),(0,l.yg)("li",{parentName:"ul"},"Returns a modified ",(0,l.yg)("inlineCode",{parentName:"li"},"Block")," as output"),(0,l.yg)("li",{parentName:"ul"},"Can modify both ",(0,l.yg)("inlineCode",{parentName:"li"},"data")," and ",(0,l.yg)("inlineCode",{parentName:"li"},"meta")," properties"),(0,l.yg)("li",{parentName:"ul"},"Should always return the block (even if unchanged)")),(0,l.yg)("h2",{id:"basic-plugin-examples"},"Basic Plugin Examples"),(0,l.yg)("h3",{id:"text-transformation-plugin"},"Text Transformation Plugin"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"import { BOTUI_BLOCK_TYPES } from 'botui'\n\nconst emphasisPlugin = (block) => {\n  if (block.type === BOTUI_BLOCK_TYPES.MESSAGE) {\n    // Transform !(text) to <i>text</i>\n    block.data.text = block.data.text?.replace(/!\\(([^\\)]+)\\)/g, '<i>$1</i>')\n\n    // Transform *text* to <strong>text</strong>\n    block.data.text = block.data.text?.replace(/\\*([^\\*]+)\\*/g, '<strong>$1</strong>')\n  }\n  return block\n}\n\nmyBot.use(emphasisPlugin)\n")),(0,l.yg)("h3",{id:"logging-plugin"},"Logging Plugin"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const loggingPlugin = (block) => {\n  console.log(`[BotUI] ${block.type.toUpperCase()}:`, {\n    key: block.key,\n    data: block.data,\n    meta: block.meta\n  })\n  return block\n}\n\nmyBot.use(loggingPlugin)\n")),(0,l.yg)("h3",{id:"content-filtering-plugin"},"Content Filtering Plugin"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const profanityFilterPlugin = (block) => {\n  if (block.type === BOTUI_BLOCK_TYPES.MESSAGE && block.data.text) {\n    const bannedWords = ['spam', 'inappropriate']\n    let text = block.data.text\n\n    bannedWords.forEach(word => {\n      const regex = new RegExp(word, 'gi')\n      text = text.replace(regex, '*'.repeat(word.length))\n    })\n\n    block.data.text = text\n  }\n  return block\n}\n\nmyBot.use(profanityFilterPlugin)\n")),(0,l.yg)("h2",{id:"advanced-plugin-examples"},"Advanced Plugin Examples"),(0,l.yg)("h3",{id:"metadata-enhancement-plugin"},"Metadata Enhancement Plugin"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const timestampPlugin = (block) => {\n  // Add timestamp to all blocks\n  block.meta.timestamp = new Date().toISOString()\n\n  // Add additional metadata for messages\n  if (block.type === BOTUI_BLOCK_TYPES.MESSAGE) {\n    block.meta.messageLength = block.data.text?.length || 0\n    block.meta.wordCount = block.data.text?.split(' ').length || 0\n  }\n\n  return block\n}\n\nmyBot.use(timestampPlugin)\n")),(0,l.yg)("h3",{id:"conditional-processing-plugin"},"Conditional Processing Plugin"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const markdownPlugin = (block) => {\n  // Only process if markdown is enabled in meta\n  if (block.meta.enableMarkdown && block.type === BOTUI_BLOCK_TYPES.MESSAGE) {\n    block.data.text = block.data.text\n      ?.replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')   // **bold**\n      ?.replace(/\\*(.*?)\\*/g, '<em>$1</em>')               // *italic*\n      ?.replace(/`(.*?)`/g, '<code>$1</code>')             // `code`\n  }\n  return block\n}\n\nmyBot.use(markdownPlugin)\n\n// Usage with markdown enabled\nawait myBot.message.add(\n  { text: 'This is **bold** and *italic* text with `code`' },\n  { enableMarkdown: true }\n)\n")),(0,l.yg)("h3",{id:"data-validation-plugin"},"Data Validation Plugin"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const validationPlugin = (block) => {\n  if (block.type === BOTUI_BLOCK_TYPES.MESSAGE) {\n    // Ensure text exists\n    if (!block.data.text) {\n      block.data.text = '[Empty message]'\n    }\n\n    // Limit message length\n    const maxLength = block.meta.maxLength || 1000\n    if (block.data.text.length > maxLength) {\n      block.data.text = block.data.text.substring(0, maxLength - 3) + '...'\n      block.meta.truncated = true\n    }\n\n    // Sanitize HTML if not explicitly allowed\n    if (!block.meta.allowHtml) {\n      block.data.text = block.data.text\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n    }\n  }\n  return block\n}\n\nmyBot.use(validationPlugin)\n")),(0,l.yg)("h3",{id:"analytics-plugin"},"Analytics Plugin"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const analyticsPlugin = (block) => {\n  // Track message analytics\n  if (block.type === BOTUI_BLOCK_TYPES.MESSAGE) {\n    analytics.track('bot_message_sent', {\n      messageType: block.meta.messageType || 'text',\n      messageLength: block.data.text?.length || 0,\n      timestamp: new Date().toISOString()\n    })\n  }\n\n  // Track action analytics\n  if (block.type === BOTUI_BLOCK_TYPES.ACTION) {\n    analytics.track('bot_action_requested', {\n      actionType: block.meta.actionType || 'input',\n      hasOptions: !!block.data.options,\n      optionCount: block.data.options?.length || 0,\n      timestamp: new Date().toISOString()\n    })\n  }\n\n  return block\n}\n\nmyBot.use(analyticsPlugin)\n")),(0,l.yg)("h3",{id:"dynamic-content-plugin"},"Dynamic Content Plugin"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const dynamicContentPlugin = (block) => {\n  if (block.type === BOTUI_BLOCK_TYPES.MESSAGE && block.data.text) {\n    // Replace variables with dynamic content\n    block.data.text = block.data.text\n      .replace(/\\{\\{username\\}\\}/g, getCurrentUser()?.name || 'User')\n      .replace(/\\{\\{time\\}\\}/g, new Date().toLocaleTimeString())\n      .replace(/\\{\\{date\\}\\}/g, new Date().toLocaleDateString())\n\n    // Process conditional content\n    block.data.text = block.data.text.replace(\n      /\\{\\{if:(.*?)\\}\\}(.*?)\\{\\{\\/if\\}\\}/g,\n      (match, condition, content) => {\n        return evaluateCondition(condition) ? content : ''\n      }\n    )\n  }\n  return block\n}\n\nfunction evaluateCondition(condition) {\n  // Simple condition evaluation - extend as needed\n  switch(condition) {\n    case 'authenticated': return !!getCurrentUser()\n    case 'mobile': return window.innerWidth < 768\n    default: return false\n  }\n}\n\nmyBot.use(dynamicContentPlugin)\n\n// Usage\nawait myBot.message.add({\n  text: 'Hello {{username}}! {{if:authenticated}}Welcome back!{{/if}}'\n})\n")),(0,l.yg)("h2",{id:"plugin-registration-and-execution"},"Plugin Registration and Execution"),(0,l.yg)("h3",{id:"registration"},"Registration"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const myBot = createBot()\n\n// Method 1: Individual registration\nmyBot.use(plugin1)\nmyBot.use(plugin2)\nmyBot.use(plugin3)\n\n// Method 2: Chained registration\nmyBot\n  .use(plugin1)\n  .use(plugin2)\n  .use(plugin3)\n")),(0,l.yg)("h3",{id:"execution-order"},"Execution Order"),(0,l.yg)("p",null,"Plugins execute in ",(0,l.yg)("strong",{parentName:"p"},"registration order"),". Each plugin receives the output of the previous plugin:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"myBot.use(plugin1)  // Executes first\nmyBot.use(plugin2)  // Receives output from plugin1\nmyBot.use(plugin3)  // Receives output from plugin2\n")),(0,l.yg)("h3",{id:"example-flow"},"Example Flow"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"myBot.use(block => {\n  console.log('Plugin 1:', block.data.text) // \"hello\"\n  block.data.text = 'hola'\n  return block\n})\n\nmyBot.use(block => {\n  console.log('Plugin 2:', block.data.text) // \"hola\" (modified by plugin 1)\n  block.data.text = 'hi'\n  return block\n})\n\nmyBot.use(block => {\n  console.log('Plugin 3:', block.data.text) // \"hi\" (modified by plugin 2)\n  return block\n})\n\nawait myBot.message.add({ text: 'hello' })\n")),(0,l.yg)("h2",{id:"plugin-best-practices"},"Plugin Best Practices"),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"Always return the block")," - Even if you don't modify it"),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"Check block type")," - Use ",(0,l.yg)("inlineCode",{parentName:"li"},"BOTUI_BLOCK_TYPES")," constants"),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"Be defensive")," - Check if properties exist before accessing them"),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"Don't mutate unnecessarily")," - Only modify what you need to change"),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"Use meaningful names")," - Make your plugin's purpose clear"),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"Handle errors gracefully")," - Don't let plugins break the bot flow")),(0,l.yg)("h2",{id:"error-handling-in-plugins"},"Error Handling in Plugins"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const safePlugin = (block) => {\n  try {\n    // Your plugin logic here\n    if (block.type === BOTUI_BLOCK_TYPES.MESSAGE) {\n      block.data.text = block.data.text?.toUpperCase()\n    }\n    return block\n  } catch (error) {\n    console.error('Plugin error:', error)\n    // Return original block if plugin fails\n    return block\n  }\n}\n\nmyBot.use(safePlugin)\n")),(0,l.yg)("h2",{id:"testing-plugins"},"Testing Plugins"),(0,l.yg)("p",null,"You can test plugins in isolation:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"import { createBlock, BOTUI_BLOCK_TYPES } from 'botui'\n\n// Create test block\nconst testBlock = createBlock(\n  BOTUI_BLOCK_TYPES.MESSAGE,\n  { messageType: 'text' },\n  { text: 'Hello !(world)!' }\n)\n\n// Test plugin\nconst result = emphasisPlugin(testBlock)\nconsole.log(result.data.text) // \"Hello <i>world</i>!\"\n")),(0,l.yg)("h2",{id:"typescript-support"},"TypeScript Support"),(0,l.yg)("p",null,"For TypeScript users, plugins can be strongly typed:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-typescript"},"import { Plugin, Block, BOTUI_BLOCK_TYPES } from 'botui'\n\nconst typedPlugin: Plugin = (block: Block): Block => {\n  if (block.type === BOTUI_BLOCK_TYPES.MESSAGE) {\n    // TypeScript will provide autocomplete and type checking\n    block.data.text = (block.data.text as string)?.toUpperCase()\n  }\n  return block\n}\n")),(0,l.yg)("p",null,"Plugins are one of BotUI's most powerful features, allowing you to customize every aspect of your bot's behavior while keeping your core conversation logic clean and focused."))}p.isMDXComponent=!0},9916:(e,n,t)=>{t.d(n,{xA:()=>g,yg:()=>m});var a=t(3696);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach(function(n){l(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function r(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},g=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef(function(e,n){var t=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,g=r(e,["components","mdxType","originalType","parentName"]),u=c(t),d=l,m=u["".concat(s,".").concat(d)]||u[d]||p[d]||i;return t?a.createElement(m,o(o({ref:n},g),{},{components:t})):a.createElement(m,o({ref:n},g))});function m(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var i=t.length,o=new Array(i);o[0]=d;var r={};for(var s in n)hasOwnProperty.call(n,s)&&(r[s]=n[s]);r.originalType=e,r[u]="string"==typeof e?e:l,o[1]=r;for(var c=2;c<i;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);